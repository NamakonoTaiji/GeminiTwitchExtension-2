# Twitch Gemini Translator - プロジェクト説明

## 概要

Twitch Gemini Translator は、海外の Twitch ストリーマーのチャットを日本語に自動翻訳する Chrome 拡張機能です。Google Gemini 2.0 Flash API を使用することで、文脈を理解した自然な翻訳を実現します。この拡張機能により、言語の壁を超えて海外の配信者とコミュニティを楽しむことができます。

## 背景と目的

海外の Twitch コンテンツを視聴する際、チャットの内容を理解できないという課題があります。既存の翻訳拡張機能は DeepL API などを使用していますが、文脈を十分に考慮できないため、翻訳精度に限界がありました。本プロジェクトでは、Google Gemini 2.0 Flash API の高度な文脈理解能力を活用し、より自然で正確なリアルタイム翻訳を提供することを目指しています。

## 技術的特徴

1. **リアルタイムチャット検出**: MutationObserver API を使用して Twitch チャットの変更をリアルタイムで監視
2. **言語判定アルゴリズム**: テキスト内の言語特性を分析し、翻訳が必要かどうかを判断
3. **Gemini 2.0 Flash API 活用**: 文脈を考慮した高品質な翻訳のためのプロンプト設計
4. **キャッシュシステム**: 同一メッセージの翻訳結果を保存することで API 使用量を最適化
5. **自動再接続機能**: Chrome 拡張機能の特性によるコンテキスト無効化への堅牢な対応
6. **カスタマイズ可能な表示**: ユーザーの好みに合わせて翻訳表示をカスタマイズ可能
7. **URL 監視と自動切替**: ページ種類に応じた拡張機能の自動有効/無効切替
8. **モジュール化されたコード**: 責務ごとに分離された保守性の高いコード構造

## 拡張機能の利点

- **文脈を考慮した翻訳**: Gemini 2.0 Flash API の自然言語理解能力を活用し、チャット特有の表現やネットスラングも適切に翻訳
- **スマートな動作**: 配信ページでのみ自動的に有効化され、必要な時だけリソースを使用
- **リソース効率**: キャッシュシステムによる API 使用量の最適化と効率的なリクエスト管理
- **プライバシー**: すべての処理はローカルで行われ、チャットデータが第三者に共有されることはない

## 主要機能

### 翻訳機能

- Gemini 2.0 Flash API による高品質翻訳
- 翻訳モード選択（選択的翻訳、全メッセージ翻訳、英語のみ翻訳）
- 言語判定アルゴリズムによる翻訳対象の自動選択
- キャッシュシステムによる同一メッセージの高速翻訳

### ユーザーインターフェース

- シンプルなポップアップ UI による有効/無効切り替え
- 詳細な設定ページでのカスタマイズオプション
- 翻訳スタイルのカスタマイズ（色、フォント、アイコン）
- 統計情報の表示（翻訳数、キャッシュヒット率など）

### インテリジェント機能

- URL 監視による配信ページ自動検出
- SPA（Single Page Application）対応の URL 変更検知
- チャンネル切り替え時のグレースピリオド機能
- 拡張機能コンテキスト無効化からの自動復旧

### パフォーマンス最適化

- 効率的な DOM 監視
- リクエスト間隔の最適化
- メモリ使用量の管理
- バックグラウンド処理の効率化

## 技術スタック

- **JavaScript (ES6+)**: モダンな JavaScript 機能を活用
- **Chrome Extension API**: ブラウザ拡張機能フレームワーク
- **MutationObserver API**: DOM の変更検出
- **Gemini API**: Google Gemini 2.0 Flash AI モデルによる翻訳
- **ES Modules**: モジュール化されたコード構造
- **Chrome Storage API**: 設定データの保存
- **Fetch API**: ネットワークリクエスト

## アーキテクチャ概要

拡張機能は次の主要コンポーネントで構成されています：

1. **コンテンツスクリプト**: Twitch ページに直接挿入され、チャットメッセージの検出と翻訳表示を担当
2. **バックグラウンドスクリプト**: Gemini API との通信と状態管理を担当
3. **ポップアップ UI**: ユーザーの簡易操作インターフェース
4. **オプションページ**: 詳細設定と統計情報の表示
5. **共有モジュール**: 複数のコンポーネント間で共有される機能
6. **ユーティリティ**: 汎用的な機能の集合

## ライセンスと利用条件

このプロジェクトは独自のライセンスで提供され、個人利用のみを想定しています。Gemini API の利用に関しては、Google の利用規約に従う必要があります。
